<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Release Notes | Watchman</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Release Notes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Watchman is continuously deployed inside Facebook, which means that we don’t explicitly maintain version numbers. We have automation that cuts a weekly tag with a named derived from the date. You can learn more about how to reason about supported capabilities and our backwards compatibility guidelines in the Compatibility Rules docs." />
<meta property="og:description" content="Watchman is continuously deployed inside Facebook, which means that we don’t explicitly maintain version numbers. We have automation that cuts a weekly tag with a named derived from the date. You can learn more about how to reason about supported capabilities and our backwards compatibility guidelines in the Compatibility Rules docs." />
<link rel="canonical" href="https://facebook.github.io/watchman/docs/release-notes.html" />
<meta property="og:url" content="https://facebook.github.io/watchman/docs/release-notes.html" />
<meta property="og:site_name" content="Watchman" />
<meta property="og:image" content="https://facebook.github.io/watchman/static/og_image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-03T15:40:25+00:00" />
<script type="application/ld+json">
{"headline":"Release Notes","url":"https://facebook.github.io/watchman/docs/release-notes.html","dateModified":"2020-12-03T15:40:25+00:00","datePublished":"2020-12-03T15:40:25+00:00","description":"Watchman is continuously deployed inside Facebook, which means that we don’t explicitly maintain version numbers. We have automation that cuts a weekly tag with a named derived from the date. You can learn more about how to reason about supported capabilities and our backwards compatibility guidelines in the Compatibility Rules docs.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://facebook.github.io/watchman/static/logo.png"}},"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://facebook.github.io/watchman/docs/release-notes.html"},"image":"https://facebook.github.io/watchman/static/og_image.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" type="text/css" media="screen" href="/watchman/css/main.css">
  <link rel="icon" href="static/favicon.png" type="image/x-icon">

  <script async defer src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react-with-addons.min.js"></script>
  <script async defer src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>

  
  <link type="application/atom+xml" rel="alternate" href="https://facebook.github.io/watchman/feed.xml" title="Watchman" />
</head>

  <body>    
    <div id="fixed_header" class="fixedHeaderContainer visible">
  <header>
    <a href="https://facebook.github.io/watchman/"><img src="/watchman/static/logo.png" /><h2>Watchman</h2></a>
    <div class="navigationWrapper navigationFull" id="flat_nav">
      <nav class="navigation">
        <ul>
          
          <li class="navItem navItemActive">
            <a href=/watchman/docs/install.html>Docs</a>
          </li>
          
          <li class="navItem ">
            <a href=/watchman/support.html>Support</a>
          </li>
          
          <li class="navItem ">
            <a href=http://github.com/facebook/watchman>GitHub</a>
          </li>
          
        </ul>
      </nav>
    </div>
    <div class="navigationWrapper navigationSlider" id="navigation_wrap"></div>
  </header>
  <script>
    var event = document.createEvent('Event');
    event.initEvent('slide', true, true);
    document.addEventListener('slide', function (e) {
      document.body.classList.toggle('sliderActive');
    }, false);
    var navData = [
      
      {
        href       : "/watchman/docs/install.html",
        text       : "Docs",
      },
      
      {
        href       : "/watchman/support.html",
        text       : "Support",
      },
      
      {
        href       : "http://github.com/facebook/watchman",
        text       : "GitHub",
      },
      
    ];
  </script>
  <script type="text/javascript">  
  window.addEventListener('load', function() {
    var Nav = React.createClass({displayName: "Nav",
      getInitialState: function() {
        return {
          currentPath: window.location.pathname,
          slideoutActive: false,
        };
      },
      getDefaultProps: function() {
        return {
          data: navData,
        }
      },
      handleClick: function(id) {
        this.setState({
          slideoutActive: false,
        });
        document.dispatchEvent(event);
      },
      handleSlide: function(id) {
        this.setState({
          slideoutActive: !this.state.slideoutActive,
        });
        document.dispatchEvent(event);
      },
      render: function() {
        var classes = React.addons.classSet({
          'navSlideout': true,
          'navSlideoutActive': this.state.slideoutActive,
        });
        var navClasses = React.addons.classSet({
          'slidingNav': true,
          'slidingNavActive': this.state.slideoutActive,
        });
        return (
          React.createElement("div", null, 
            React.createElement("div", {className: classes, onClick: this.handleSlide}, 
              React.createElement("i", {className: "fa fa-bars"})
            ), 
            React.createElement("nav", {className: navClasses}, 
              React.createElement("ul", null, 
                this.props.data.map(this.renderNavItems)
              )
            )
          )
        );
      },
      renderNavItems: function(child, index) {
        var classes = React.addons.classSet({
          'navItem': true,
          'navItemActive': this.state.currentPath === child.href,
        });
        return (
          React.createElement("li", {key: index, className: classes}, 
            React.createElement("a", {onClick: this.handleClick, href: child.href}, child.text)
          )
        );
      },
    });

    function render(navData) {
      React.render(
        React.createElement(Nav, {data: navData}),
        document.getElementById('navigation_wrap')
      );
    }
    render(navData);
  });
  </script>
</div>

    <div class="navPusher">
      <div class="mainContainer blogContainer postContainer">
  <div id="main_wrap" class="wrapper mainWrapper">
    <div>
</div>
<nav class='toc' id="doc_nav"></nav>
<script>
  var docnavData = [
    
    {
      group     : "Installation",
      items     : [
        
          
        {
          key : "/watchman/docs/install.html",
          title : "Installation",
          url : "/watchman/docs/install.html",
        },
        
          
        {
          key : "/watchman/docs/release-notes.html",
          title : "Release Notes",
          url : "/watchman/docs/release-notes.html",
        }
        
      ],
    },
    
    {
      group     : "Invocation",
      items     : [
        
          
        {
          key : "/watchman/docs/cli-options.html",
          title : "Command Line",
          url : "/watchman/docs/cli-options.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-make.html",
          title : "watchman-make",
          url : "/watchman/docs/watchman-make.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-wait.html",
          title : "watchman-wait",
          url : "/watchman/docs/watchman-wait.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-replicate-subscription.html",
          title : "watchman-replicate-subscription",
          url : "/watchman/docs/watchman-replicate-subscription.html",
        },
        
          
        {
          key : "/watchman/docs/cppclient.html",
          title : "C++ Client",
          url : "/watchman/docs/cppclient.html",
        },
        
          
        {
          key : "/watchman/docs/nodejs.html",
          title : "NodeJS",
          url : "/watchman/docs/nodejs.html",
        },
        
          
        {
          key : "/watchman/docs/config.html",
          title : "Configuration Files",
          url : "/watchman/docs/config.html",
        },
        
          
        {
          key : "/watchman/docs/socket-interface.html",
          title : "Socket Interface",
          url : "/watchman/docs/socket-interface.html",
        }
        
      ],
    },
    
    {
      group     : "Compatibility",
      items     : [
        
          
        {
          key : "/watchman/docs/compatibility.html",
          title : "Compatibility Rules",
          url : "/watchman/docs/compatibility.html",
        },
        
          
        {
          key : "/watchman/docs/capabilities.html",
          title : "Capabilities",
          url : "/watchman/docs/capabilities.html",
        }
        
      ],
    },
    
    {
      group     : "Commands",
      items     : [
        
          
        {
          key : "/watchman/docs/cmd/clock.html",
          title : "clock",
          url : "/watchman/docs/cmd/clock.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/find.html",
          title : "find",
          url : "/watchman/docs/cmd/find.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/flush-subscriptions.html",
          title : "flush-subscriptions",
          url : "/watchman/docs/cmd/flush-subscriptions.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/get-config.html",
          title : "get-config",
          url : "/watchman/docs/cmd/get-config.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/get-sockname.html",
          title : "get-sockname",
          url : "/watchman/docs/cmd/get-sockname.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/list-capabilities.html",
          title : "list-capabilities",
          url : "/watchman/docs/cmd/list-capabilities.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/log.html",
          title : "log",
          url : "/watchman/docs/cmd/log.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/log-level.html",
          title : "log-level",
          url : "/watchman/docs/cmd/log-level.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/query.html",
          title : "query",
          url : "/watchman/docs/cmd/query.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/shutdown-server.html",
          title : "shutdown-server",
          url : "/watchman/docs/cmd/shutdown-server.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/since.html",
          title : "since",
          url : "/watchman/docs/cmd/since.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/state-enter.html",
          title : "state-enter",
          url : "/watchman/docs/cmd/state-enter.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/state-leave.html",
          title : "state-leave",
          url : "/watchman/docs/cmd/state-leave.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/subscribe.html",
          title : "subscribe",
          url : "/watchman/docs/cmd/subscribe.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger.html",
          title : "trigger",
          url : "/watchman/docs/cmd/trigger.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger-del.html",
          title : "trigger-del",
          url : "/watchman/docs/cmd/trigger-del.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger-list.html",
          title : "trigger-list",
          url : "/watchman/docs/cmd/trigger-list.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/unsubscribe.html",
          title : "unsubscribe",
          url : "/watchman/docs/cmd/unsubscribe.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/version.html",
          title : "version",
          url : "/watchman/docs/cmd/version.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch.html",
          title : "watch",
          url : "/watchman/docs/cmd/watch.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-del.html",
          title : "watch-del",
          url : "/watchman/docs/cmd/watch-del.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-del-all.html",
          title : "watch-del-all",
          url : "/watchman/docs/cmd/watch-del-all.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-list.html",
          title : "watch-list",
          url : "/watchman/docs/cmd/watch-list.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-project.html",
          title : "watch-project",
          url : "/watchman/docs/cmd/watch-project.html",
        }
        
      ],
    },
    
    {
      group     : "Queries",
      items     : [
        
          
        {
          key : "/watchman/docs/clockspec.html",
          title : "Clockspec",
          url : "/watchman/docs/clockspec.html",
        },
        
          
        {
          key : "/watchman/docs/file-query.html",
          title : "File Queries",
          url : "/watchman/docs/file-query.html",
        },
        
          
        {
          key : "/watchman/docs/simple-query.html",
          title : "Simple Pattern Syntax",
          url : "/watchman/docs/simple-query.html",
        },
        
          
        {
          key : "/watchman/docs/scm-query.html",
          title : "Source Control Aware Queries",
          url : "/watchman/docs/scm-query.html",
        }
        
      ],
    },
    
    {
      group     : "Expression Terms",
      items     : [
        
          
        {
          key : "/watchman/docs/expr/allof.html",
          title : "allof",
          url : "/watchman/docs/expr/allof.html",
        },
        
          
        {
          key : "/watchman/docs/expr/anyof.html",
          title : "anyof",
          url : "/watchman/docs/expr/anyof.html",
        },
        
          
        {
          key : "/watchman/docs/expr/dirname.html",
          title : "dirname & idirname",
          url : "/watchman/docs/expr/dirname.html",
        },
        
          
        {
          key : "/watchman/docs/expr/empty.html",
          title : "empty",
          url : "/watchman/docs/expr/empty.html",
        },
        
          
        {
          key : "/watchman/docs/expr/exists.html",
          title : "exists",
          url : "/watchman/docs/expr/exists.html",
        },
        
          
        {
          key : "/watchman/docs/expr/match.html",
          title : "match & imatch",
          url : "/watchman/docs/expr/match.html",
        },
        
          
        {
          key : "/watchman/docs/expr/name.html",
          title : "name & iname",
          url : "/watchman/docs/expr/name.html",
        },
        
          
        {
          key : "/watchman/docs/expr/not.html",
          title : "not",
          url : "/watchman/docs/expr/not.html",
        },
        
          
        {
          key : "/watchman/docs/expr/pcre.html",
          title : "pcre & ipcre",
          url : "/watchman/docs/expr/pcre.html",
        },
        
          
        {
          key : "/watchman/docs/expr/since.html",
          title : "since",
          url : "/watchman/docs/expr/since.html",
        },
        
          
        {
          key : "/watchman/docs/expr/size.html",
          title : "size",
          url : "/watchman/docs/expr/size.html",
        },
        
          
        {
          key : "/watchman/docs/expr/suffix.html",
          title : "suffix",
          url : "/watchman/docs/expr/suffix.html",
        },
        
          
        {
          key : "/watchman/docs/expr/type.html",
          title : "type",
          url : "/watchman/docs/expr/type.html",
        }
        
      ],
    },
    
    {
      group     : "Internals",
      items     : [
        
          
        {
          key : "/watchman/docs/bser.html",
          title : "BSER Binary Protocol",
          url : "/watchman/docs/bser.html",
        },
        
          
        {
          key : "/watchman/docs/casefolding.html",
          title : "Case-Insensitivity",
          url : "/watchman/docs/casefolding.html",
        },
        
          
        {
          key : "/watchman/contributing.html",
          title : "Contributing",
          url : "/watchman/contributing.html",
        },
        
          
        {
          key : "/watchman/docs/cookies.html",
          title : "Query Synchronization",
          url : "/watchman/docs/cookies.html",
        }
        
      ],
    },
    
    {
      group     : "Troubleshooting",
      items     : [
        
          
        {
          key : "/watchman/docs/troubleshooting.html",
          title : "Troubleshooting",
          url : "/watchman/docs/troubleshooting.html",
        }
        
      ],
    },
    
  ];
</script>
<script type="text/javascript">
window.addEventListener('load', function() {
  var DocNav = React.createClass({displayName: "DocNav",
    getInitialState: function() {
      return {
        toggleActive: false,
      };
    },
    getDefaultProps: function() {
      return {
        currentDoc: "Release Notes",
        currentGroup: "Installation",
        data: docnavData,
      }
    },
    handleSlide: function(id) {
      this.setState({
        toggleActive: !this.state.toggleActive,
      });
    },
    render: function() {
      var classes = React.addons.classSet({
        'navToggle': true,
        'navToggleActive': this.state.toggleActive,
      });
      var navClasses = React.addons.classSet({
        'toggleNav': true,
        'toggleNavActive': this.state.toggleActive,
      });
      return (
        React.createElement("div", {className: navClasses},
          React.createElement("section", null,
            this.props.data.map(this.renderNavGroups)
          ),
          React.createElement("div", {className: classes, onClick: this.handleSlide}, React.createElement("i", {className: "fa fa-chevron-circle-down"}))
        )
      );
    },
    renderNavGroups: function(child, index) {
      var classes = React.addons.classSet({
        'navGroup': true,
        'navGroupActive': this.props.currentGroup === child.group,
      });
      return (
        React.createElement("div", {className: classes, key: index},
          React.createElement("h3", null, child.group),
          React.createElement("ul", null,
            child.items.map(this.renderNavItems)
          )
        )
      );
    },
    renderNavItems: function(child, index) {
      var itemClasses = React.addons.classSet({
        'navListItem': true,
        'navListItemActive': this.props.currentDoc === child.title,
      });
      var classes = React.addons.classSet({
        'navItem': true,
        'navItemActive': this.props.currentDoc === child.title,
      });
      return (
        React.createElement("li", {className: itemClasses, key: index}, React.createElement("a", {className: classes, href: child.url},  child.title))
      );
    },
  });

  function docNavRender(docnavData) {
    React.render(
      React.createElement(DocNav, {data: docnavData}),
      document.getElementById('doc_nav')
    );
  }
  docNavRender(docnavData);
});
</script>

    <div class="post">
  <header class="post-header">
    <h1 class="post-title">Release Notes</h1>
  </header>

  <article class="post-content">
   
      <p>Watchman is continuously deployed inside Facebook, which means that we don’t
explicitly maintain version numbers.  We have automation that cuts a weekly
tag with a named derived from the date.  You can learn more about how to reason
about supported <em>capabilities</em> and our backwards compatibility guidelines
in the <a href="compatibility.html">Compatibility Rules</a> docs.</p>

<p>We focus on the highlights only in these release notes.  For a full history
that includes all of the gory details, please see <a href="https://github.com/facebook/watchman/commits/master">the commit history on
GitHub</a>.</p>

<h3 id="watchman-v2020071300">Watchman v2020.07.13.00</h3>

<ul>
  <li>Added script <code class="language-plaintext highlighter-rouge">watchman-replicate-subscription</code>. It can replicate an 
existing watchman subscription. Integrators can use this script to validate
watchman notifications their client is receiving.</li>
  <li>Added support for suffix sets in suffix expressions.  You now can specify
multiple suffixes to match against by setting the second argument to a list
of suffixes. See <code class="language-plaintext highlighter-rouge">suffix-set</code> documentation for
<a href="/watchman/docs/expr/suffix.html#suffix-set">more details</a></li>
  <li>pywatchman: introduced new pywatchman_aio client for python</li>
  <li>Windows: we no longer trust environment variables to locate the state directory
which should result in a better experience for users that mix cygwin, mingw,
native windows and/or WSL or other environments</li>
  <li>Windows: we now support unix domain sockets on Windows 10.  The CLI will prefer
to use unix domain sockets when available.</li>
</ul>

<p>We weren’t great at updating the release notes since the prior release;
there was a lot of work to support our sister project EdenFS that isn’t
broadly relevant to those outside FB at the time of writing.</p>

<h3 id="watchman-490-2017-08-24">Watchman 4.9.0 (2017-08-24)</h3>

<ul>
  <li>New field: <code class="language-plaintext highlighter-rouge">content.sha1hex</code>.  This field expands to the SHA1 hash of
the file contents, expressed in hex digits (40 character hex string).
Watchman maintains a cache of the content hashes and can compute the
hash on demand and also heuristically as files are changed.  This is
useful for tooling that wants to perform more intelligent cache invalidation
or build artifact fetching from content addressed storage.</li>
  <li>Experimental feature: Source Control Aware query mode.  Currently supports
only Mercurial (patches to add Git support are welcomed!).  SCM aware query
mode helps to keep response sizes closer to <code class="language-plaintext highlighter-rouge">O(what-you-changed)</code> than
to <code class="language-plaintext highlighter-rouge">O(all-repo-changes)</code> when rebasing your code.  Using this feature
effectively may require some additional infrastructure to compute and
associate data with revisions from your repo.</li>
  <li>Fixed an issue that resulted in the perf logging thread deadlocking when
<code class="language-plaintext highlighter-rouge">perf_logger_command</code> is enabled in the global configuration</li>
  <li>Fixed an issue where queries larger than 1MB would likely result in
a PDU error response.</li>
  <li>Reduced lock contention for subscriptions that do no use the advanced
settling (<code class="language-plaintext highlighter-rouge">drop</code>, <code class="language-plaintext highlighter-rouge">defer</code>) options.</li>
  <li>Fixed <code class="language-plaintext highlighter-rouge">since</code> generator behavior when using unix timestamps rather than
the preferred clock string syntax</li>
  <li>Improved the reporting of “new” files in watchman results</li>
  <li>Improved performance of handling changes on case insensitive filesystems</li>
  <li>Windows: promoted from alpha to beta status!</li>
  <li>Windows: fixed some performance and reliability issues</li>
  <li>Windows: now operates correctly on Windows 7</li>
  <li>Windows: can now see and report symlinks and junction points</li>
  <li>Windows: fixed potential deadlock in trigger deletion</li>
  <li>Windows: fixed stack trace rendering on win32</li>
  <li>Windows: improved IO scheduling around deletes on win32</li>
  <li>Windows: improved handling of case insensitive win32 driver letters</li>
  <li>pywatchman: the python wheel format is used for publishing watchman pypi package</li>
  <li>pywatchman: now watchman path is configurable in python client</li>
  <li>pywatchman: now python client can be used as a context manager</li>
  <li>Solaris: support for Solaris has been removed. If you’d like to commit to
testing and maintaining Solaris support, we’d love to hear from you!</li>
</ul>

<h3 id="watchman-480-never-formally-released">Watchman 4.8.0 (never formally released)</h3>

<p>Whoops, we never got around to tagging this beyond a release candidate tag!</p>

<ul>
  <li>New command <code class="language-plaintext highlighter-rouge">flush-subscriptions</code> to synchronize subscriptions associated
with the current session.</li>
  <li>On Windows, return <code class="language-plaintext highlighter-rouge">/</code> as the directory separator.  Previously we used <code class="language-plaintext highlighter-rouge">\</code>.
This change should be pretty neutral for clients, and makes it easier to work
with both the internals and the integration test infrastructure.</li>
  <li>Enforce socket Unix groups more strongly — Watchman will now refuse to start
if it couldn’t gain the right group memberships, as can happen for sites that
are experiencing intermittent LDAP connectivity problems.</li>
  <li>pywatchman now officially supports Python 3. pywatchman will return Unicode
strings (possibly with surrogate escapes) by default, but can optionally return
bytestrings. Note that on Python 3, pywatchman requires Watchman 4.8 and above.
The Python 2 interface and requirements remain unchanged.</li>
  <li>Prior to 4.8, methods on the Java WatchmanClient that returned
  ListenableFutures would swallow exceptions and hang in an unfinished state
  under situations like socket closure or thread death.  This has been fixed, and
  now ListenableFutures propagate exception conditions immediately.  (Note that
  this is typically unrecoverable, and users should create a new WatchmanClient
  to re-establish communication with Watchman.)  See #412.</li>
  <li>The minimum Java version for the Watchman Java client has always been 1.7,
  but it was incorrectly described to be 1.6.  The Java client’s build file has
  been fixed accordingly.</li>
  <li>Watchman was converted from C to C++.  The conversion exposed several
  concurrency bugs, all of which have now been fixed.</li>
  <li>Subscription queries are now executed in the context of the client thread,
  which means that subscriptions are dispatched in parallel.  Previously,
  subscriptions would be serially dispatched and block the disk IO thread.</li>
  <li>Triggers are now dispatched in parallel and waits are managed in their own
  threads (one thread per trigger).  This improves concurrency and resolves a
  couple of waitpid related issues where watchman may not reap spawned children
  in a timely fashion, or may spin on CPU until another child is spawned.</li>
  <li>Fixed an object lifecycle management issue that could cause a crash when
aging out old/transient files.</li>
  <li>Implement an upgraded wire protocol, BSERv2, on the server and in pywatchman.
  BSERv2 can carry information about string encoding over the wire. This lets
  pywatchman convert to Unicode strings on Python 3. Clients and servers know how
  to  transparently fall back to BSERv1.</li>
  <li>OS X: we no longer use socket activation when registering with launchd.
This was the source of some upgrade problems for mac Homebrew users.</li>
</ul>

<h3 id="watchman-470-2016-09-10">Watchman 4.7.0 (2016-09-10)</h3>

<ul>
  <li>Reduced memory usage by 40%</li>
  <li>Queries can now run with a shared lock.  It is recommended that clients
move away from the <code class="language-plaintext highlighter-rouge">n:FOO</code> style server side named cursor clockspecs to
take full advantage of this.</li>
  <li>Added new <code class="language-plaintext highlighter-rouge">glob</code> generator as a walking strategy for queries.  This
allows watchman to evaluate globs in the most efficient manner.  Our
friends in the Buck project have already integrated this into their
<code class="language-plaintext highlighter-rouge">BUCK</code> file parsing to evaluate globs without touching the filesystem!</li>
  <li>Added <code class="language-plaintext highlighter-rouge">"case_sensitive": true</code> option to queries to force matches to
happen in a case sensitive manner, even if the watched root is on
a case insensitive filesystem.  This is used to accelerate certain
types of internal traversal: if we know that a path is case sensitive
we can perform an <code class="language-plaintext highlighter-rouge">O(1)</code> lookup where we would otherwise have to perform
an <code class="language-plaintext highlighter-rouge">O(number-of-directory-entries)</code> scan and compare.</li>
  <li>Fixed a race condition during subscription initiation that could emit
incorrect clock values.</li>
  <li>Fixed spurious over-notification for parent directories of changed files
on Mac.</li>
  <li>Fixed some reliability issues on Windows</li>
</ul>

<h3 id="watchman-460-2016-07-09">Watchman 4.6.0 (2016-07-09)</h3>

<ul>
  <li>Improved I/O scheduling when processing recursive deletes and deep directory
rename operations.</li>
  <li>Improved performance of the <code class="language-plaintext highlighter-rouge">ignore_dirs</code> configuration option on OS X and
Windows systems.  We take advantage of an undocumented (but supported!)
API to further accelerate this for the first 8 entries in the <code class="language-plaintext highlighter-rouge">ignore_dirs</code>
on OS X.  Users that depend on this configuration to avoid recrawls will
want to review and prioritize their most active build dirs to the front
of the <code class="language-plaintext highlighter-rouge">ignore_dirs</code> specified in their <code class="language-plaintext highlighter-rouge">.watchmanconfig</code> file.</li>
  <li>Added an optional recrawl recovery strategy for OS X that will attempt to
resync from the fseventsd journal rather than performing a full filesystem
walk.  This is currently disabled by default but will likely be enabled
by default in the next Watchman release.  You can enable this by setting
<code class="language-plaintext highlighter-rouge">fsevents_try_resync: true</code> in either <code class="language-plaintext highlighter-rouge">/etc/watchman.json</code> or your
<code class="language-plaintext highlighter-rouge">.watchmanconfig</code>.  This should reduce the frequency of recrawl warnings
for some users/workloads, and also improves I/O for users with extremely
large trees.</li>
  <li>Fixed accidental exponential time complexity issue with recursive deletes
and deep directory rename operations on case-insensitive filesystems (such as
OS X).  This manifested as high CPU utilization for extended periods of time.</li>
  <li>Added support for allowing non-owner access to a Watchman instance.  Only
the owner is authorized to create or delete watches.  Non-owners can view
information about existing watches.  Access control is based on unix domain
socket permissions.  The new but not yet documented configuration options
<code class="language-plaintext highlighter-rouge">sock_group</code> and <code class="language-plaintext highlighter-rouge">sock_access</code> can be used to control this new behavior.</li>
  <li>Added support for inetd-style socket activation of the watchman service.
<a href="https://github.com/facebook/watchman/commit/2985377eaf8c8538b28fae9add061b67991a87c2">this commit includes a sample configuration for systemd</a>.</li>
  <li>Added the <code class="language-plaintext highlighter-rouge">symlink_target</code> field to the stored metadata for files.  This
holds the text of the symbolic link for symlinks.  You can test whether it
is supported by a watchman server using the capability name
<code class="language-plaintext highlighter-rouge">field-symlink_target</code>.</li>
  <li>Fixed an issue where watchman may not reap child processes spawned by
triggers.</li>
  <li>Fixed an issue where watchman may block forever during shutdown if there
are other connected clients.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">hint_num_dirs</code> configuration option.</li>
</ul>

<h3 id="pywatchman-140---">pywatchman 1.4.0 (????-??-??)</h3>

<p>(These changes have not yet been released to pypi)</p>

<ul>
  <li>Added immutable version of data results to bser.  This is cheaper to build
from a serialized bser representation than the mutable version and is
better suited to large result sets received from watchman.</li>
  <li>Fixed a number of misc. portability issues</li>
  <li>Added Python 3.x support</li>
</ul>

<h3 id="watchman-450-2016-02-18">Watchman 4.5.0 (2016-02-18)</h3>

<ul>
  <li>Fixed an inotify race condition for non-atomic directory replacements
that was introduced in Watchman 4.4.</li>
</ul>

<h3 id="watchman-440-2016-02-02">Watchman 4.4.0 (2016-02-02)</h3>

<ul>
  <li>Added state-enter and state-leave commands can allow subscribers to more
intelligently settle/coalesce events around hg update or builds.</li>
  <li>Fixed an issue where subscriptions could double-notify for the same events.</li>
  <li>Fixed an issue where subscriptions that never match any files add
O(all-observed-files) CPU cost to every subscription dispatch</li>
</ul>

<h3 id="watchman-430-2015-12-14">Watchman 4.3.0 (2015-12-14)</h3>

<ul>
  <li>Improved handling of case insensitive renames; halved the memory usage
and doubled crawl speed on OS X.</li>
</ul>

<h3 id="watchman-420-2015-12-08">Watchman 4.2.0 (2015-12-08)</h3>

<ul>
  <li>Increased strictness of checks for symlinks; rather than just checking
whether the leaf of a directory tree is a symlink, we now check each
component down from the root of the watch.  This improves detection
and processing for directory-to-symlink (and vice versa) transitions.</li>
  <li>Increased priority of the watchman process on OS X.</li>
</ul>

<h3 id="pywatchman-130-2015-10-22">pywatchman 1.3.0 (2015-10-22)</h3>

<ul>
  <li>Added <code class="language-plaintext highlighter-rouge">watchman-make</code> and <code class="language-plaintext highlighter-rouge">watchman-wait</code> commands</li>
  <li>Added pure python implementation of BSER</li>
</ul>

<h3 id="watchman-410-2015-10-20">Watchman 4.1.0 (2015-10-20)</h3>

<ul>
  <li>Fixed an issue where symlink size was always reported as 0 on OS X
using the new bulkstat functionality</li>
</ul>

<h3 id="watchman-400-2015-10-19">Watchman 4.0.0 (2015-10-19)</h3>

<ul>
  <li>Fixed an issue where a directory that was replaced by a symlink would
cause a symlink traversal instead of correctly updating the type of the
node and marking the children removed.</li>
  <li>Fixed a debugging log line that was emitted at the wrong log level on
every directory traversal.</li>
</ul>

<h3 id="watchman-390-2015-10-12">Watchman 3.9.0 (2015-10-12)</h3>

<ul>
  <li>Fixed an issue where dir renames on OS X could cause us to lose track of
the files inside the renamed dir</li>
  <li>Fixed an issue where dir deletes and replacements on Linux could cause us
to lose track of the files inside the replaced dir (similar to the OS X issue
above in manifestation, but a different root cause).</li>
  <li>Improved (re)crawl speed for dirs with more than a couple of entries on average
(improvement can be up to 5x for dirs with up to 64 entries on average).
You may now tune the <code class="language-plaintext highlighter-rouge">hint_num_files_per_dir</code> setting in your
<code class="language-plaintext highlighter-rouge">.watchmanconfig</code> to better match your tree.  <a href="/watchman/docs/config.html#hint_num_files_per_dir">More details</a></li>
  <li>Improved (re)crawl speed on OS X 10.10 and later by using <code class="language-plaintext highlighter-rouge">getattrlistbulk</code>.
This allows us to improve the data:syscall ratio during crawling and can
improve throughput by up to 40% for larger trees.</li>
  <li>Add optional <code class="language-plaintext highlighter-rouge">sync_timeout</code> to the <code class="language-plaintext highlighter-rouge">clock</code> command</li>
  <li>Avoid accidentally passing descriptors other than the stdio streams
when we spawn the watchman service.</li>
  <li>Fixed a race condition where we could start two sets of watcher threads
for the same dir if two clients issue a <code class="language-plaintext highlighter-rouge">watch</code> or <code class="language-plaintext highlighter-rouge">watch-project</code> at
the same time</li>
  <li>Added a helpful error for a tmux + launchd issue on OS X</li>
</ul>

<h3 id="watchman-380-2015-09-14">Watchman 3.8.0 (2015-09-14)</h3>

<ul>
  <li>Improved latency of processing kernel notifications. It should now be far
less likely to run into an notification queue overflow.</li>
  <li>Improved idle behavior. There were a couple of places where watchman would
wake up more often than was strictly needed and these have now been fixed.
This is mostly of interest to laptop users on battery power.</li>
  <li>Improved inotify move tracking.  Some move operations could cause watchman
to become confused and trigger a recrawl.  This has now been resolved.</li>
  <li>Hardened statedir and permissions. There was a possibility of a symlink
attack and this has now been mitigated by re-structuring the statedir layout.</li>
  <li>Fixed a possible deadlock in the idle watch reaper</li>
  <li>Fixed an issue where the watchman -p log-level debug could drop log
notifications in the CLI</li>
  <li>Disabled the IO-throttling-during-crawl that we added in 3.7. It proved to
be more harmful than beneficial.</li>
  <li><code class="language-plaintext highlighter-rouge">-j</code> CLI option now accepts either JSON or BSER encoded command on stdin</li>
  <li>Added <a href="/watchman/docs/capabilities.html">capabilities</a> to the server,
and added the <a href="/watchman/docs/cmd/version.html#capabilityCheck">capabilityCheck</a>
method to the python and node clients.</li>
</ul>

<h3 id="pywatchman-120-2015-08-15">pywatchman 1.2.0 (2015-08-15)</h3>

<ul>
  <li>Added the <code class="language-plaintext highlighter-rouge">capabilityCheck</code> method</li>
  <li>Added <code class="language-plaintext highlighter-rouge">SocketTimeout</code> exception to distinguish timeouts from protocol level
exceptions</li>
</ul>

<h3 id="fb-watchman-130-for-node-2015-08-15">fb-watchman 1.3.0 for node (2015-08-15)</h3>

<ul>
  <li>Added the <a href="/watchman/docs/nodejs.html#checking-for-watchman-availability">capabilityCheck</a> method.</li>
</ul>

<h3 id="pywatchman-100-2015-08-06">pywatchman 1.0.0 (2015-08-06)</h3>

<ul>
  <li>First official pypi release, thanks to <a href="https://github.com/kwlzn">@kwlzn</a>
for setting up the release machinery for this.</li>
</ul>

<h3 id="watchman-370-2015-08-05">Watchman 3.7.0 (2015-08-05)</h3>

<p>(Watchman 3.6.0 wasn’t formally released)</p>

<ul>
  <li>Fixed bug where <code class="language-plaintext highlighter-rouge">query match</code> on <code class="language-plaintext highlighter-rouge">foo*.java</code> with <code class="language-plaintext highlighter-rouge">wholename</code> scope
would incorrectly match <code class="language-plaintext highlighter-rouge">foo/bar/baz.java</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">src/**/*.java</code> recursive glob pattern support to <code class="language-plaintext highlighter-rouge">query match</code>.</li>
  <li>Added options dictionary to <code class="language-plaintext highlighter-rouge">query</code>’s <code class="language-plaintext highlighter-rouge">match</code> operator.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">includedotfiles</code> option to <code class="language-plaintext highlighter-rouge">query match</code> to include files
whose names start with <code class="language-plaintext highlighter-rouge">.</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">noescape</code> option to <code class="language-plaintext highlighter-rouge">query match</code> to make <code class="language-plaintext highlighter-rouge">\</code> match literal <code class="language-plaintext highlighter-rouge">\</code>.</li>
  <li>We’ll now automatically age out and stop watches. See <a href="/watchman/docs/config.html#idle_reap_age_seconds">idle_reap_age_seconds</a> for more information.</li>
  <li><code class="language-plaintext highlighter-rouge">watch-project</code> will now try harder to re-use an existing watch and avoid
creating an overlapping watch.</li>
  <li>Reduce I/O priority during crawling on systems that support this</li>
  <li>Fixed issue with the <code class="language-plaintext highlighter-rouge">long long</code> data type in the python BSER module</li>
</ul>

<h3 id="fb-watchman-120-for-node-2015-07-11">fb-watchman 1.2.0 for node (2015-07-11)</h3>

<ul>
  <li>Updated the node client to more gracefully handle <code class="language-plaintext highlighter-rouge">undefined</code> values in
objects when serializing them; we now omit keys whose values are <code class="language-plaintext highlighter-rouge">undefined</code>
rather than throw an exception.</li>
</ul>

<h3 id="watchman-350-2015-06-29">Watchman 3.5.0 (2015-06-29)</h3>

<ul>
  <li>Fix the version number reported by watchman.</li>
</ul>

<h3 id="watchman-340-2015-06-29">Watchman 3.4.0 (2015-06-29)</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">trigger</code> now supports an optional <code class="language-plaintext highlighter-rouge">relative_root</code> argument. The trigger is
evaluated with respect to this subdirectory. See
<a href="/watchman/docs/cmd/trigger.html#relative-roots">trigger</a> for more.</li>
</ul>

<h3 id="fb-watchman-110-for-node-2015-06-25">fb-watchman 1.1.0 for node (2015-06-25)</h3>

<ul>
  <li>Updated the node client to handle 64-bit integer values using the
<a href="https://www.npmjs.com/package/node-int64">node-int64</a>.  These are most
likely to show up if your query fields include <code class="language-plaintext highlighter-rouge">size</code> and you have files
larger than 2GB in your watched root.</li>
</ul>

<h3 id="fb-watchman-100-for-node-2015-06-23">fb-watchman 1.0.0 for node (2015-06-23)</h3>

<ul>
  <li>Updated the node client to support <a href="/watchman/docs/bser.html">BSER</a>
encoding, fixing a quadratic performance issue in the JSON stream
decoder that was used previously.</li>
</ul>

<h3 id="watchman-330-2015-06-22">Watchman 3.3.0 (2015-06-22)</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">query</code> and <code class="language-plaintext highlighter-rouge">subscribe</code> now support an optional <code class="language-plaintext highlighter-rouge">relative_root</code>
argument. Inputs and outputs are evaluated with respect to this
subdirectory. See
<a href="/watchman/docs/file-query.html#relative-roots">File Queries</a> for more.</li>
</ul>

    
  </article>
</div>

  </div>
</div>


      <div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <section id="fb_oss" class="fbOpenSourceFooter">
      <a href="https://code.facebook.com/projects/" target="_blank"><img src="/watchman/static/oss_logo.png" alt="Facebook Open Source" title="Facebook Open Source" /></a>
    </section>
  </div>
</div>
<script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = window.location.href.replace(window.location.hash, '') + "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  window.addEventListener('load', function() {
    var contentBlock = document.getElementsByClassName("post")[0] || document.getElementsByClassName("news")[0];
    if (!contentBlock) {
      return;
    }
    for (var level = 1; level <= 6; level++) {
      linkifyAnchors(level, contentBlock);
    }
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44373548-13', 'auto');
  ga('send', 'pageview');
</script>
<script>
  window.addEventListener('load', function() {
    hljs.initHighlightingOnLoad();

    // Async load some styles
    function loadStyle(href) {
      var s = document.createElement('link');
      s.setAttribute('rel', 'stylesheet');
      s.setAttribute('href', href);
      s.setAttribute('type', 'text/css');
      document.getElementsByTagName('head')[0].appendChild(s);
    }
    loadStyle("//nuclide.io/static/fonts/332720/BC699FA675F9356E3.css");
    loadStyle("//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css");
    loadStyle("//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css");
  });
</script>

    </div>
  </body>

</html>
